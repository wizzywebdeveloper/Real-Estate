<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LUXE ESTATES - Premium Real Estate Platform</title>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap');

    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background: #ffffff;
      color: #111827;
      overflow-x: hidden;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      width: 100%;
    }

    .main-wrapper {
      width: 100%;
      min-height: 100%;
      overflow-y: auto;
    }

    /* Navigation */
    .navbar {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      padding: 1.2rem 2rem;
      position: sticky;
      top: 0;
      z-index: 1000;
      border-bottom: 1px solid rgba(229, 231, 235, 0.8);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .nav-container {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .logo {
      font-size: 1.8rem;
      font-weight: 700;
      font-family: 'Playfair Display', serif;
      background: linear-gradient(135deg, #2563eb, #6366f1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .nav-links {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .nav-link {
      color: #374151;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s;
      cursor: pointer;
    }

    .nav-link:hover {
      color: #2563eb;
    }

    .agent-portal-btn {
      padding: 0.75rem 1.5rem;
      background: linear-gradient(135deg, #2563eb, #6366f1);
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.3s;
      white-space: nowrap;
    }

    .agent-portal-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
    }

    /* Agent Portal Modal */
    .auth-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 2000;
      overflow-y: auto;
      padding: 2rem;
    }

    .auth-modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .auth-content {
      background: #ffffff;
      border-radius: 20px;
      max-width: 500px;
      width: 100%;
      border: 1px solid rgba(229, 231, 235, 0.8);
      animation: slideUp 0.3s ease-out;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .auth-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2rem;
      border-bottom: 1px solid rgba(229, 231, 235, 0.8);
    }

    .auth-tabs {
      display: flex;
      gap: 1rem;
    }

    .auth-tab {
      padding: 0.75rem 1.5rem;
      background: none;
      border: none;
      color: #6b7280;
      font-weight: 600;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: all 0.3s;
    }

    .auth-tab.active {
      color: #2563eb;
      border-bottom-color: #2563eb;
    }

    .auth-body {
      padding: 2rem;
    }

    .auth-form {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .form-label {
      color: #374151;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .form-input {
      padding: 0.875rem;
      background: #f9fafb;
      border: 1px solid rgba(209, 213, 219, 0.8);
      border-radius: 8px;
      color: #111827;
      font-size: 0.95rem;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .form-input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .form-textarea {
      min-height: 120px;
      resize: vertical;
      font-family: inherit;
    }

    .submit-btn {
      padding: 1rem;
      background: linear-gradient(135deg, #2563eb, #6366f1);
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.3s;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
    }

    .submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .error-message {
      color: #ef4444;
      font-size: 0.85rem;
      margin-top: 0.5rem;
    }

    .success-message {
      color: #10b981;
      font-size: 0.85rem;
      margin-top: 0.5rem;
    }

    /* Dashboard */
    .dashboard-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #f9fafb;
      z-index: 3000;
      overflow-y: auto;
    }

    .dashboard-container.active {
      display: block;
    }

    .dashboard-header {
      background: linear-gradient(135deg, #2563eb, #6366f1);
      padding: 2rem;
      color: white;
    }

    .dashboard-top {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .dashboard-title h1 {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .logout-btn {
      padding: 0.75rem 1.5rem;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 8px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .logout-btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .dashboard-stats {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
    }

    .stat-box {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      padding: 1.5rem;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .stat-box-label {
      font-size: 0.9rem;
      opacity: 0.9;
      margin-bottom: 0.5rem;
    }

    .stat-box-value {
      font-size: 2rem;
      font-weight: 700;
      font-family: 'Playfair Display', serif;
    }

    .dashboard-main {
      max-width: 1400px;
      margin: 2rem auto;
      padding: 0 2rem;
    }

    .dashboard-tabs {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      border-bottom: 2px solid rgba(229, 231, 235, 0.8);
    }

    .dashboard-tab {
      padding: 1rem 1.5rem;
      background: none;
      border: none;
      color: #6b7280;
      font-weight: 600;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      margin-bottom: -2px;
      transition: all 0.3s;
    }

    .dashboard-tab.active {
      color: #2563eb;
      border-bottom-color: #2563eb;
    }

    .dashboard-content {
      display: none;
    }

    .dashboard-content.active {
      display: block;
    }

    .property-upload-form {
      background: #ffffff;
      padding: 2rem;
      border-radius: 16px;
      border: 1px solid rgba(229, 231, 235, 0.8);
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }

    .image-upload-area {
      border: 2px dashed #cbd5e1;
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      background: #f9fafb;
    }

    .image-upload-area:hover {
      border-color: #2563eb;
      background: rgba(37, 99, 235, 0.05);
    }

    .image-upload-area.drag-over {
      border-color: #2563eb;
      background: rgba(37, 99, 235, 0.1);
    }

    .image-previews {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .image-preview {
      position: relative;
      border-radius: 8px;
      overflow: hidden;
      aspect-ratio: 1;
    }

    .image-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .remove-image {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: #ef4444;
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      line-height: 1;
      transition: transform 0.2s;
    }

    .remove-image:hover {
      transform: scale(1.1);
    }

    .my-properties-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 2rem;
    }

    .status-badge {
      display: inline-block;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
    }

    .status-pending {
      background: rgba(251, 191, 36, 0.2);
      color: #f59e0b;
    }

    .status-active {
      background: rgba(16, 185, 129, 0.2);
      color: #10b981;
    }

    .status-rejected {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
    }

    .messages-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .message-card {
      background: #ffffff;
      padding: 1.5rem;
      border-radius: 12px;
      border: 1px solid rgba(229, 231, 235, 0.8);
    }

    .message-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid rgba(229, 231, 235, 0.8);
    }

    .message-from {
      font-weight: 600;
      color: #111827;
    }

    .message-date {
      color: #6b7280;
      font-size: 0.85rem;
    }

    .message-property {
      color: #2563eb;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }

    .message-text {
      color: #4b5563;
      line-height: 1.6;
    }

    .message-contact {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid rgba(229, 231, 235, 0.8);
      display: flex;
      gap: 1.5rem;
      flex-wrap: wrap;
      font-size: 0.9rem;
      color: #6b7280;
    }

    .contact-agent-form {
      background: rgba(249, 250, 251, 0.8);
      padding: 2rem;
      border-radius: 12px;
      border: 1px solid rgba(229, 231, 235, 0.8);
      margin-top: 2rem;
    }

    .contact-agent-form h3 {
      color: #2563eb;
      margin-bottom: 1.5rem;
      font-size: 1.3rem;
      font-family: 'Playfair Display', serif;
    }

    .map-preview {
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(99, 102, 241, 0.1));
      border-radius: 12px;
      padding: 3rem;
      text-align: center;
      border: 2px solid rgba(37, 99, 235, 0.2);
      margin: 2rem 0;
    }

    .map-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }

    .map-preview h4 {
      color: #2563eb;
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      font-family: 'Playfair Display', serif;
    }

    .map-preview p {
      color: #6b7280;
      font-size: 0.95rem;
    }

    .social-links {
      display: flex;
      gap: 1.5rem;
      justify-content: center;
      margin-top: 2rem;
    }

    .social-link {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      background: rgba(37, 99, 235, 0.1);
      border-radius: 8px;
      color: #2563eb;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s;
      border: 1px solid rgba(37, 99, 235, 0.2);
    }

    .social-link:hover {
      background: #2563eb;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }

    .social-icon {
      font-size: 1.2rem;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.05) 0%, rgba(99, 102, 241, 0.05) 100%);
      padding: 4rem 2rem;
      text-align: center;
      border-bottom: 1px solid rgba(229, 231, 235, 0.8);
    }

    .hero h1 {
      font-size: 3rem;
      font-weight: 800;
      font-family: 'Playfair Display', serif;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, #2563eb, #6366f1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero p {
      font-size: 1.3rem;
      color: #6b7280;
      margin-bottom: 2.5rem;
    }

    /* AI Search Section */
    .search-section {
      max-width: 900px;
      margin: 0 auto 2rem;
      background: rgba(249, 250, 251, 0.8);
      backdrop-filter: blur(10px);
      padding: 2rem;
      border-radius: 16px;
      border: 1px solid rgba(229, 231, 235, 0.8);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }

    .ai-search-box {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .ai-search-input {
      flex: 1;
      padding: 1rem 1.5rem;
      background: #ffffff;
      border: 2px solid rgba(37, 99, 235, 0.2);
      border-radius: 12px;
      color: #111827;
      font-size: 1rem;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .ai-search-input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .ai-search-input::placeholder {
      color: #9ca3af;
    }

    .search-btn {
      padding: 1rem 2.5rem;
      background: linear-gradient(135deg, #2563eb, #6366f1);
      border: none;
      border-radius: 12px;
      color: white;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.3s;
    }

    .search-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
    }

    /* Filters */
    .filters {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .filter-label {
      color: #4b5563;
      font-size: 0.9rem;
      font-weight: 600;
    }

    .filter-select {
      padding: 0.75rem;
      background: #ffffff;
      border: 1px solid rgba(209, 213, 219, 0.8);
      border-radius: 8px;
      color: #111827;
      font-size: 0.95rem;
      cursor: pointer;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .filter-select:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    /* Container */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 3rem 2rem;
    }

    .section-title {
      font-size: 2rem;
      font-weight: 700;
      font-family: 'Playfair Display', serif;
      margin-bottom: 2rem;
      text-align: center;
      color: #2563eb;
    }

    /* Properties Grid */
    .properties-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .property-card {
      background: #ffffff;
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(229, 231, 235, 0.8);
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      animation: fadeInUp 0.6s ease-out;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .property-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(37, 99, 235, 0.15);
    }

    .property-image {
      width: 100%;
      height: 220px;
      object-fit: cover;
      background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
      transition: transform 0.5s;
    }

    .property-card:hover .property-image {
      transform: scale(1.05);
    }

    .property-badges {
      position: absolute;
      top: 1rem;
      left: 1rem;
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .badge {
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      font-size: 0.75rem;
      font-weight: 600;
      backdrop-filter: blur(10px);
    }

    .badge-sale {
      background: rgba(16, 185, 129, 0.9);
      color: white;
    }

    .badge-rent {
      background: rgba(37, 99, 235, 0.9);
      color: white;
    }

    .badge-featured {
      background: rgba(99, 102, 241, 0.9);
      color: white;
    }

    .property-content {
      padding: 1.5rem;
    }

    .property-title {
      font-size: 1.3rem;
      font-weight: 700;
      font-family: 'Playfair Display', serif;
      margin-bottom: 0.5rem;
      color: #111827;
    }

    .property-location {
      color: #6b7280;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }

    .property-specs {
      display: flex;
      gap: 1.5rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }

    .spec {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      color: #4b5563;
      font-size: 0.9rem;
    }

    .property-price {
      font-size: 1.5rem;
      font-weight: 700;
      color: #2563eb;
      margin-bottom: 1rem;
    }

    .property-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 1rem;
      border-top: 1px solid rgba(229, 231, 235, 0.8);
    }

    .property-stats {
      display: flex;
      gap: 1rem;
      color: #6b7280;
      font-size: 0.85rem;
    }

    .view-details-btn {
      padding: 0.6rem 1.2rem;
      background: linear-gradient(135deg, #2563eb, #6366f1);
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.3s;
    }

    .view-details-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 2000;
      overflow-y: auto;
      padding: 2rem;
    }

    .modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: #ffffff;
      border-radius: 20px;
      max-width: 1000px;
      width: 100%;
      border: 1px solid rgba(229, 231, 235, 0.8);
      animation: slideUp 0.3s ease-out;
      max-height: 90%;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2rem;
      border-bottom: 1px solid rgba(229, 231, 235, 0.8);
    }

    .modal-title {
      font-size: 1.5rem;
      font-weight: 700;
      font-family: 'Playfair Display', serif;
      color: #2563eb;
    }

    .close-modal {
      background: none;
      border: none;
      color: #6b7280;
      font-size: 2rem;
      cursor: pointer;
      line-height: 1;
      transition: color 0.3s;
    }

    .close-modal:hover {
      color: #2563eb;
    }

    .modal-body {
      padding: 2rem;
    }

    .image-carousel {
      position: relative;
      margin-bottom: 2rem;
      border-radius: 12px;
      overflow: hidden;
    }

    .carousel-image {
      width: 100%;
      height: 400px;
      object-fit: cover;
      display: none;
      background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
    }

    .carousel-image.active {
      display: block;
    }

    .carousel-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(5px);
      border: none;
      color: #2563eb;
      font-size: 2rem;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .carousel-nav:hover {
      background: #2563eb;
      color: white;
      transform: translateY(-50%) scale(1.1);
    }

    .carousel-prev {
      left: 1rem;
    }

    .carousel-next {
      right: 1rem;
    }

    .carousel-dots {
      position: absolute;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 0.5rem;
    }

    .carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.7);
      border: none;
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
    }

    .carousel-dot.active {
      background: #2563eb;
      transform: scale(1.3);
    }

    .property-details {
      display: grid;
      gap: 2rem;
    }

    .detail-section {
      background: rgba(249, 250, 251, 0.8);
      padding: 1.5rem;
      border-radius: 12px;
      border: 1px solid rgba(229, 231, 235, 0.8);
    }

    .detail-section h3 {
      color: #2563eb;
      margin-bottom: 1rem;
      font-size: 1.2rem;
      font-family: 'Playfair Display', serif;
    }

    .detail-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }

    .detail-item {
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
    }

    .detail-label {
      color: #6b7280;
      font-size: 0.85rem;
    }

    .detail-value {
      color: #111827;
      font-weight: 600;
      font-size: 1rem;
    }

    .agent-card {
      background: rgba(249, 250, 251, 0.8);
      padding: 1.5rem;
      border-radius: 12px;
      display: flex;
      gap: 1.5rem;
      align-items: center;
      border: 1px solid rgba(229, 231, 235, 0.8);
    }

    .agent-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, #2563eb, #6366f1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: 700;
      color: white;
    }

    .agent-info h4 {
      color: #111827;
      margin-bottom: 0.5rem;
      font-family: 'Playfair Display', serif;
    }

    .agent-contact {
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
      color: #4b5563;
      font-size: 0.9rem;
    }

    /* About & Policies Sections */
    .info-section {
      background: #ffffff;
      padding: 2.5rem;
      border-radius: 16px;
      margin-bottom: 2rem;
      border: 1px solid rgba(229, 231, 235, 0.8);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .info-section h2 {
      color: #2563eb;
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
      font-family: 'Playfair Display', serif;
    }

    .info-section h3 {
      color: #6366f1;
      margin: 1.5rem 0 1rem;
      font-size: 1.3rem;
      font-family: 'Playfair Display', serif;
    }

    .info-section p, .info-section li {
      color: #4b5563;
      line-height: 1.8;
      margin-bottom: 1rem;
    }

    .info-section ul {
      list-style: none;
      padding-left: 0;
    }

    .info-section li {
      padding-left: 2rem;
      position: relative;
    }

    .info-section li:before {
      content: "‚úì";
      position: absolute;
      left: 0;
      color: #2563eb;
      font-weight: 700;
    }

    .company-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }

    .stat-card {
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.05), rgba(99, 102, 241, 0.05));
      padding: 1.5rem;
      border-radius: 12px;
      text-align: center;
      border: 1px solid rgba(229, 231, 235, 0.8);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(37, 99, 235, 0.1);
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      font-family: 'Playfair Display', serif;
      color: #2563eb;
      margin-bottom: 0.5rem;
    }

    .stat-label {
      color: #6b7280;
      font-size: 0.95rem;
    }

    /* Chat Widget */
    .chat-widget {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      z-index: 1500;
    }

    .chat-button {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #2563eb, #6366f1);
      border: none;
      color: white;
      font-size: 1.8rem;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(37, 99, 235, 0.4);
      transition: transform 0.3s, box-shadow 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .chat-button:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 30px rgba(37, 99, 235, 0.6);
    }

    .unread-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #ef4444;
      color: white;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      font-size: 0.75rem;
      font-weight: 700;
      display: none;
      align-items: center;
      justify-content: center;
    }

    .unread-badge.show {
      display: flex;
    }

    .chat-window {
      position: absolute;
      bottom: 80px;
      right: 0;
      width: 380px;
      height: 500px;
      background: #ffffff;
      border-radius: 16px;
      border: 1px solid rgba(229, 231, 235, 0.8);
      display: none;
      flex-direction: column;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      animation: slideUp 0.3s ease-out;
    }

    .chat-window.active {
      display: flex;
    }

    .chat-header {
      padding: 1.2rem;
      background: linear-gradient(135deg, #2563eb, #6366f1);
      border-radius: 16px 16px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .chat-header-info h4 {
      font-weight: 700;
      margin-bottom: 0.2rem;
      color: white;
    }

    .chat-header-info p {
      font-size: 0.85rem;
      opacity: 0.9;
      color: white;
    }

    .close-chat {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 1;
    }

    .chat-messages {
      flex: 1;
      padding: 1.5rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      background: #f9fafb;
    }

    .message {
      max-width: 80%;
      padding: 0.8rem 1rem;
      border-radius: 12px;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message-agent {
      background: #ffffff;
      align-self: flex-start;
      border: 1px solid rgba(229, 231, 235, 0.8);
      color: #111827;
    }

    .message-user {
      background: linear-gradient(135deg, #2563eb, #6366f1);
      align-self: flex-end;
      color: white;
    }

    .message-time {
      font-size: 0.7rem;
      opacity: 0.7;
      margin-top: 0.3rem;
    }

    .typing-indicator {
      display: none;
      align-items: center;
      gap: 0.5rem;
      padding: 0.8rem 1rem;
      background: #ffffff;
      border-radius: 12px;
      max-width: 80px;
      border: 1px solid rgba(229, 231, 235, 0.8);
    }

    .typing-indicator.show {
      display: flex;
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #6b7280;
      animation: typing 1.4s infinite;
    }

    .typing-dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing {
      0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.7;
      }
      30% {
        transform: translateY(-10px);
        opacity: 1;
      }
    }

    .quick-replies {
      padding: 1rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      border-top: 1px solid rgba(229, 231, 235, 0.8);
      background: #ffffff;
    }

    .quick-reply {
      padding: 0.5rem 1rem;
      background: rgba(249, 250, 251, 0.8);
      border: 1px solid rgba(37, 99, 235, 0.3);
      border-radius: 20px;
      color: #111827;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s;
    }

    .quick-reply:hover {
      background: rgba(37, 99, 235, 0.1);
      border-color: #2563eb;
      color: #2563eb;
    }

    .chat-input-area {
      padding: 1rem;
      border-top: 1px solid rgba(229, 231, 235, 0.8);
      display: flex;
      gap: 0.5rem;
      background: #ffffff;
      border-radius: 0 0 16px 16px;
    }

    .chat-input {
      flex: 1;
      padding: 0.8rem;
      background: #f9fafb;
      border: 1px solid rgba(229, 231, 235, 0.8);
      border-radius: 20px;
      color: #111827;
      font-size: 0.9rem;
    }

    .chat-input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .chat-send {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #2563eb, #6366f1);
      border: none;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s;
    }

    .chat-send:hover {
      transform: scale(1.1);
    }

    /* Footer */
    .footer {
      background: #111827;
      padding: 3rem 2rem 1.5rem;
      border-top: 1px solid rgba(229, 231, 235, 0.2);
    }

    .footer-content {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-bottom: 2rem;
    }

    .footer-section h3 {
      color: #2563eb;
      margin-bottom: 1rem;
      font-family: 'Playfair Display', serif;
    }

    .footer-section p, .footer-section a {
      color: #9ca3af;
      line-height: 1.8;
      text-decoration: none;
      display: block;
      margin-bottom: 0.5rem;
      transition: color 0.3s;
    }

    .footer-section a:hover {
      color: #2563eb;
    }

    .footer-bottom {
      text-align: center;
      padding-top: 2rem;
      border-top: 1px solid rgba(229, 231, 235, 0.1);
      color: #6b7280;
    }

    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2rem;
      }

      .hero p {
        font-size: 1rem;
      }

      .ai-search-box {
        flex-direction: column;
      }

      .search-btn {
        width: 100%;
      }

      .filters {
        grid-template-columns: 1fr;
      }

      .properties-grid {
        grid-template-columns: 1fr;
      }

      .chat-window {
        width: calc(100vw - 2rem);
        right: 1rem;
        left: 1rem;
      }

      .modal {
        padding: 1rem;
      }

      .carousel-image {
        height: 250px;
      }

      .nav-links {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="main-wrapper"><!-- Navigation -->
   <nav class="navbar">
    <div class="nav-container">
     <div class="logo" id="company-name">
      LUXE ESTATES
     </div>
     <div class="nav-links"><a class="nav-link" onclick="scrollToSection('properties')">Properties</a> <a class="nav-link" onclick="scrollToSection('about')">About</a> <a class="nav-link" onclick="scrollToSection('policies')">Policies</a> <a class="nav-link" onclick="openChat()">Contact</a> <button class="agent-portal-btn" onclick="openAgentPortal()">üìã List / Sell Your Property</button>
     </div>
    </div>
   </nav><!-- Hero Section -->
   <section class="hero">
    <h1 id="hero-title">Find Your Dream Property</h1>
    <p id="hero-subtitle">Discover luxury homes across Nigeria with AI-powered search</p><!-- AI Search Section -->
    <div class="search-section">
     <div class="ai-search-box"><input type="text" id="ai-search" class="ai-search-input" placeholder="Try: 'self-contained room near downtown' or '3-bed house with pool'"> <button class="search-btn" onclick="performAISearch()">üîç Search</button>
     </div><!-- Advanced Filters -->
     <div class="filters">
      <div class="filter-group"><label class="filter-label">Transaction Type</label> <select class="filter-select" id="filter-type" onchange="applyFilters()"> <option value="all">All Properties</option> <option value="sale">For Sale</option> <option value="rent">For Rent</option> </select>
      </div>
      <div class="filter-group"><label class="filter-label">Bedrooms</label> <select class="filter-select" id="filter-bedrooms" onchange="applyFilters()"> <option value="all">Any</option> <option value="self-contained">Self-Contained</option> <option value="1">1 Bedroom</option> <option value="2">2 Bedrooms</option> <option value="3">3 Bedrooms</option> <option value="4+">4+ Bedrooms</option> </select>
      </div>
      <div class="filter-group"><label class="filter-label">Location</label> <select class="filter-select" id="filter-location" onchange="applyFilters()"> <option value="all">All Locations</option> <option value="Lagos">Lagos</option> <option value="Abuja">Abuja</option> <option value="Port Harcourt">Port Harcourt</option> <option value="Ibadan">Ibadan</option> </select>
      </div>
      <div class="filter-group"><label class="filter-label">Sort By</label> <select class="filter-select" id="filter-sort" onchange="applyFilters()"> <option value="featured">Featured First</option> <option value="price-low">Price: Low to High</option> <option value="price-high">Price: High to Low</option> </select>
      </div>
     </div>
    </div>
   </section><!-- Properties Section -->
   <div class="container" id="properties">
    <h2 class="section-title">Available Properties</h2>
    <div class="properties-grid" id="properties-grid"></div>
   </div><!-- About Section -->
   <div class="container" id="about">
    <div class="info-section">
     <h2 id="about-title">About LUXE ESTATES</h2>
     <p>LUXE ESTATES is Nigeria's premier real estate platform, connecting property seekers with their dream homes since 2010. With over a decade of excellence, we've established ourselves as the most trusted name in Nigerian real estate.</p>
     <div class="company-stats">
      <div class="stat-card">
       <div class="stat-number">
        150+
       </div>
       <div class="stat-label">
        Professional Agents
       </div>
      </div>
      <div class="stat-card">
       <div class="stat-number">
        37
       </div>
       <div class="stat-label">
        States Covered
       </div>
      </div>
      <div class="stat-card">
       <div class="stat-number">
        5000+
       </div>
       <div class="stat-label">
        Properties Listed
       </div>
      </div>
      <div class="stat-card">
       <div class="stat-number">
        2010
       </div>
       <div class="stat-label">
        Year Established
       </div>
      </div>
     </div>
     <h3>üè¢ Company Details</h3>
     <ul>
      <li>Registered Company Name: LUXE ESTATES LIMITED</li>
      <li>RC Number: RC 1234567</li>
      <li>NIESV Membership: Certified Member</li>
      <li>Coverage: All 36 States + FCT</li>
      <li>Head Office: Plot 45, Admiralty Way, Lekki Phase 1, Lagos</li>
      <li>Contact: <span id="contact-email">info@luxeestates.com</span> | <span id="contact-phone">+234 800 123 4567</span></li>
     </ul>
     <h3>üíº Our Services</h3>
     <ul>
      <li>üèòÔ∏è Property Sales - Complete listing, marketing, and transaction management</li>
      <li>üîë Property Rentals - Search, tenant screening, and lease agreements</li>
      <li>üìä Property Valuation - Professional valuation by certified surveyors</li>
      <li>üíº Investment Advisory - Expert market analysis and investment guidance</li>
     </ul>
    </div>
   </div><!-- Policies Section -->
   <div class="container" id="policies">
    <div class="info-section">
     <h2>üìã Company Policies</h2>
     <h3>üìã Listing Policy</h3>
     <ul>
      <li>All properties undergo thorough verification before listing</li>
      <li>24-48 hour approval timeline for new listings</li>
      <li>Required documentation: Property title, owner ID, valuation report</li>
      <li>90-day active listing period with renewal options</li>
     </ul>
     <h3>üí∞ Commission &amp; Fees Policy</h3>
     <ul>
      <li>Property Sales: 5% commission on final sale price</li>
      <li>Property Rentals: 10% of annual rent as agency fee</li>
      <li>FREE property listing for individual owners</li>
      <li>No hidden charges - all fees disclosed upfront</li>
     </ul>
     <h3>üîí Privacy &amp; Data Protection</h3>
     <ul>
      <li>Full compliance with NDPR 2019 (Nigeria Data Protection Regulation)</li>
      <li>Strict confidentiality for all client information</li>
      <li>Encrypted data storage and secure information handling</li>
      <li>No sharing of personal information without consent</li>
     </ul>
     <h3>üö´ Anti-Fraud Policy</h3>
     <ul>
      <li>Zero tolerance for fraudulent listings or practices</li>
      <li>Background checks on all agents and partners</li>
      <li>Secure payment channels with escrow services</li>
      <li>Buyer and seller protection measures in place</li>
     </ul>
    </div>
   </div><!-- Footer -->
   <footer class="footer">
    <div class="footer-content">
     <div class="footer-section">
      <h3>LUXE ESTATES</h3>
      <p>Your trusted partner in finding the perfect property across Nigeria.</p>
      <p>RC Number: RC 1234567</p>
     </div>
     <div class="footer-section">
      <h3>Quick Links</h3><a href="#properties">Properties</a> <a href="#about">About Us</a> <a href="#policies">Policies</a>
     </div>
     <div class="footer-section">
      <h3>Contact Us</h3>
      <p>üìß info@luxeestates.com</p>
      <p>üìû +234 800 123 4567</p>
      <p>üìç Lekki Phase 1, Lagos</p>
     </div>
     <div class="footer-section">
      <h3>Business Hours</h3>
      <p>Monday - Friday: 8AM - 6PM</p>
      <p>Saturday: 9AM - 4PM</p>
      <p>Sunday: Closed</p>
     </div>
    </div>
    <div class="social-links"><a href="https://facebook.com" target="_blank" rel="noopener noreferrer" class="social-link"> <span class="social-icon">üìò</span> Facebook </a> <a href="https://instagram.com" target="_blank" rel="noopener noreferrer" class="social-link"> <span class="social-icon">üì∑</span> Instagram </a> <a href="https://twitter.com" target="_blank" rel="noopener noreferrer" class="social-link"> <span class="social-icon">üê¶</span> X (Twitter) </a> <a href="https://wa.me/2348001234567" target="_blank" rel="noopener noreferrer" class="social-link"> <span class="social-icon">üí¨</span> WhatsApp </a> <a href="https://linkedin.com" target="_blank" rel="noopener noreferrer" class="social-link"> <span class="social-icon">üíº</span> LinkedIn </a>
    </div>
    <div class="footer-bottom">
     <p>¬© 2024 LUXE ESTATES. All rights reserved. | Powered by AI Technology</p>
    </div>
   </footer><!-- Property Modal -->
   <div class="modal" id="property-modal">
    <div class="modal-content">
     <div class="modal-header">
      <h2 class="modal-title">Property Details</h2><button class="close-modal" onclick="closeModal()">√ó</button>
     </div>
     <div class="modal-body" id="modal-body"></div>
    </div>
   </div><!-- Agent Auth Modal -->
   <div class="auth-modal" id="auth-modal">
    <div class="auth-content">
     <div class="auth-header">
      <div class="auth-tabs"><button class="auth-tab active" onclick="switchAuthTab('login')">Login</button> <button class="auth-tab" onclick="switchAuthTab('register')">Create Account</button>
      </div><button class="close-modal" onclick="closeAuthModal()">√ó</button>
     </div>
     <div class="auth-body"><!-- Login Form -->
      <form class="auth-form" id="login-form" onsubmit="handleLogin(event)">
       <div class="form-group"><label class="form-label" for="login-email">Email</label> <input type="email" id="login-email" class="form-input" required>
       </div>
       <div class="form-group"><label class="form-label" for="login-password">Password</label> <input type="password" id="login-password" class="form-input" required>
       </div>
       <div id="login-error" class="error-message" style="display: none;"></div><button type="submit" class="submit-btn">Login</button>
      </form><!-- Register Form -->
      <form class="auth-form" id="register-form" style="display: none;" onsubmit="handleRegister(event)">
       <div class="form-group"><label class="form-label" for="register-name">Full Name</label> <input type="text" id="register-name" class="form-input" required>
       </div>
       <div class="form-group"><label class="form-label" for="register-email">Email</label> <input type="email" id="register-email" class="form-input" required>
       </div>
       <div class="form-group"><label class="form-label" for="register-phone">Phone Number</label> <input type="tel" id="register-phone" class="form-input" required>
       </div>
       <div class="form-group"><label class="form-label" for="register-password">Password</label> <input type="password" id="register-password" class="form-input" required minlength="6">
       </div>
       <div id="register-error" class="error-message" style="display: none;"></div>
       <div id="register-success" class="success-message" style="display: none;"></div><button type="submit" class="submit-btn">Create Account</button>
      </form>
     </div>
    </div>
   </div><!-- Agent Dashboard -->
   <div class="dashboard-container" id="agent-dashboard">
    <div class="dashboard-header">
     <div class="dashboard-top">
      <div class="dashboard-title">
       <h1>Agent Dashboard</h1>
       <p id="agent-welcome">Welcome back!</p>
      </div><button class="logout-btn" onclick="handleLogout()">Logout</button>
     </div>
     <div class="dashboard-stats">
      <div class="stat-box">
       <div class="stat-box-label">
        Total Properties
       </div>
       <div class="stat-box-value" id="stat-total">
        0
       </div>
      </div>
      <div class="stat-box">
       <div class="stat-box-label">
        Active Listings
       </div>
       <div class="stat-box-value" id="stat-active">
        0
       </div>
      </div>
      <div class="stat-box">
       <div class="stat-box-label">
        Pending Approval
       </div>
       <div class="stat-box-value" id="stat-pending">
        0
       </div>
      </div>
      <div class="stat-box">
       <div class="stat-box-label">
        Total Views
       </div>
       <div class="stat-box-value" id="stat-views">
        0
       </div>
      </div>
      <div class="stat-box">
       <div class="stat-box-label">
        Unread Messages
       </div>
       <div class="stat-box-value" id="stat-messages">
        0
       </div>
      </div>
     </div>
    </div>
    <div class="dashboard-main">
     <div class="dashboard-tabs"><button class="dashboard-tab active" onclick="switchDashboardTab('my-properties')">My Properties</button> <button class="dashboard-tab" onclick="switchDashboardTab('messages')">Messages</button> <button class="dashboard-tab" onclick="switchDashboardTab('upload')">Upload New</button>
     </div><!-- My Properties Tab -->
     <div class="dashboard-content active" id="tab-my-properties">
      <div class="my-properties-grid" id="my-properties-grid"></div>
     </div><!-- Messages Tab -->
     <div class="dashboard-content" id="tab-messages">
      <div class="messages-list" id="messages-list"></div>
     </div><!-- Upload Tab -->
     <div class="dashboard-content" id="tab-upload">
      <form class="property-upload-form" id="upload-form" onsubmit="handlePropertyUpload(event)">
       <h3 style="color: #2563eb; font-family: 'Playfair Display', serif; margin-bottom: 2rem;">Upload New Property</h3>
       <div class="form-row">
        <div class="form-group"><label class="form-label" for="prop-title">Property Title *</label> <input type="text" id="prop-title" class="form-input" required>
        </div>
        <div class="form-group"><label class="form-label" for="prop-type">Transaction Type *</label> <select id="prop-type" class="form-input" required> <option value="sale">For Sale</option> <option value="rent">For Rent</option> </select>
        </div>
       </div>
       <div class="form-row">
        <div class="form-group"><label class="form-label" for="prop-price">Price (‚Ç¶) *</label> <input type="number" id="prop-price" class="form-input" required min="0">
        </div>
        <div class="form-group"><label class="form-label" for="prop-location">Location *</label> <input type="text" id="prop-location" class="form-input" placeholder="e.g., Victoria Island, Lagos" required>
        </div>
       </div>
       <div class="form-row">
        <div class="form-group"><label class="form-label" for="prop-city">City *</label> <input type="text" id="prop-city" class="form-input" required>
        </div>
        <div class="form-group"><label class="form-label" for="prop-state">State *</label> <input type="text" id="prop-state" class="form-input" required>
        </div>
       </div>
       <div class="form-row">
        <div class="form-group"><label class="form-label" for="prop-bedrooms">Bedrooms *</label> <select id="prop-bedrooms" class="form-input" required> <option value="self-contained">Self-Contained</option> <option value="1">1 Bedroom</option> <option value="2">2 Bedrooms</option> <option value="3">3 Bedrooms</option> <option value="4">4 Bedrooms</option> <option value="5">5 Bedrooms</option> <option value="6">6 Bedrooms</option> <option value="7">7+ Bedrooms</option> </select>
        </div>
        <div class="form-group"><label class="form-label" for="prop-bathrooms">Bathrooms *</label> <input type="number" id="prop-bathrooms" class="form-input" required min="1">
        </div>
       </div>
       <div class="form-row">
        <div class="form-group"><label class="form-label" for="prop-sqft">Size (sqft) *</label> <input type="number" id="prop-sqft" class="form-input" required min="0">
        </div>
        <div class="form-group"><label class="form-label">Property Location *</label> <button type="button" class="form-input" onclick="openMapPicker()" style="cursor: pointer; text-align: left; display: flex; align-items: center; gap: 0.5rem; justify-content: space-between;"> <span id="map-picker-display">üìç Click to pick location on map</span> <span style="color: #2563eb;">üó∫Ô∏è</span> </button> <input type="hidden" id="prop-coords" required>
        </div>
       </div>
       <div class="form-group"><label class="form-label" for="prop-description">Description *</label> <textarea id="prop-description" class="form-input form-textarea" required></textarea>
       </div>
       <div class="form-group"><label class="form-label">Property Images * (Minimum 8 images required)</label>
        <div class="image-upload-area" id="image-upload-area" onclick="document.getElementById('image-input').click()">
         <div style="font-size: 3rem; margin-bottom: 1rem;">
          üì∏
         </div>
         <p style="color: #6b7280; margin-bottom: 0.5rem;">Click or drag images here</p>
         <p style="color: #9ca3af; font-size: 0.85rem;">Upload at least 8 high-quality images</p>
        </div><input type="file" id="image-input" accept="image/*" multiple style="display: none;" onchange="handleImageUpload(event)">
        <div class="image-previews" id="image-previews"></div>
        <div id="image-error" class="error-message" style="display: none;"></div>
       </div><button type="submit" class="submit-btn" id="upload-submit-btn">Upload Property</button>
      </form>
     </div>
    </div>
   </div><!-- Map Picker Modal -->
   <div class="auth-modal" id="map-picker-modal">
    <div class="auth-content" style="max-width: 900px;">
     <div class="auth-header">
      <h3 style="color: #2563eb; font-family: 'Playfair Display', serif; margin: 0;">üìç Pick Property Location</h3><button class="close-modal" onclick="closeMapPicker()">√ó</button>
     </div>
     <div class="auth-body" style="padding: 0;">
      <div id="map-picker" style="width: 100%; height: 500px;"></div>
      <div style="padding: 1.5rem; background: #f9fafb; border-top: 1px solid rgba(229, 231, 235, 0.8);">
       <p style="color: #6b7280; margin-bottom: 1rem; font-size: 0.9rem;">üí° Click anywhere on the map to set the property location. You can drag the marker to adjust.</p>
       <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem;"><span style="color: #4b5563; font-weight: 600; font-size: 0.9rem;">Selected:</span> <span id="selected-coords" style="color: #2563eb; font-weight: 600;">No location selected</span>
       </div><button class="submit-btn" onclick="confirmMapLocation()" id="confirm-location-btn" disabled style="opacity: 0.5;"> Confirm Location </button>
      </div>
     </div>
    </div>
   </div><!-- Chat Widget -->
   <div class="chat-widget"><button class="chat-button" onclick="toggleChat()"> üí¨ <span class="unread-badge" id="unread-badge">1</span> </button>
    <div class="chat-window" id="chat-window">
     <div class="chat-header">
      <div class="chat-header-info">
       <h4>LUXE Support</h4>
       <p>Online ‚Ä¢ Reply in minutes</p>
      </div><button class="close-chat" onclick="toggleChat()">√ó</button>
     </div>
     <div class="chat-messages" id="chat-messages">
      <div class="message message-agent">
       <div>
        Welcome to LUXE ESTATES! üëã How can I help you find your dream property today?
       </div>
       <div class="message-time">
        Just now
       </div>
      </div>
     </div>
     <div class="typing-indicator" id="typing-indicator">
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
     </div>
     <div class="quick-replies"><button class="quick-reply" onclick="sendQuickReply('Find Property')">Find Property</button> <button class="quick-reply" onclick="sendQuickReply('Schedule Tour')">Schedule Tour</button> <button class="quick-reply" onclick="sendQuickReply('Pricing Info')">Pricing Info</button>
     </div>
     <div class="chat-input-area"><input type="text" class="chat-input" id="chat-input" placeholder="Type your message..." onkeypress="handleChatKeypress(event)"> <button class="chat-send" onclick="sendChatMessage()">‚û§</button>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Map variables
    let mapPickerMap = null;
    let mapPickerMarker = null;
    let selectedLocation = null;
    let propertyMap = null;
    let propertyMarker = null;

    // Open map picker for agent
    function openMapPicker() {
      const modal = document.getElementById('map-picker-modal');
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Initialize map if not already done
      setTimeout(() => {
        if (!mapPickerMap) {
          // Center on Lagos, Nigeria by default
          mapPickerMap = L.map('map-picker').setView([6.5244, 3.3792], 12);
          
          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors',
            maxZoom: 19
          }).addTo(mapPickerMap);
          
          // Add click handler
          mapPickerMap.on('click', function(e) {
            const lat = e.latlng.lat.toFixed(6);
            const lng = e.latlng.lng.toFixed(6);
            
            // Remove old marker if exists
            if (mapPickerMarker) {
              mapPickerMap.removeLayer(mapPickerMarker);
            }
            
            // Add new marker
            mapPickerMarker = L.marker([lat, lng], {
              draggable: true
            }).addTo(mapPickerMap);
            
            // Update selected location
            selectedLocation = { lat, lng };
            document.getElementById('selected-coords').textContent = `${lat}, ${lng}`;
            
            // Enable confirm button
            const confirmBtn = document.getElementById('confirm-location-btn');
            confirmBtn.disabled = false;
            confirmBtn.style.opacity = '1';
            
            // Handle marker drag
            mapPickerMarker.on('dragend', function(event) {
              const marker = event.target;
              const position = marker.getLatLng();
              const newLat = position.lat.toFixed(6);
              const newLng = position.lng.toFixed(6);
              
              selectedLocation = { lat: newLat, lng: newLng };
              document.getElementById('selected-coords').textContent = `${newLat}, ${newLng}`;
            });
          });
        } else {
          mapPickerMap.invalidateSize();
        }
      }, 100);
    }

    // Close map picker
    function closeMapPicker() {
      const modal = document.getElementById('map-picker-modal');
      modal.classList.remove('active');
      document.body.style.overflow = 'auto';
    }

    // Confirm map location
    function confirmMapLocation() {
      if (selectedLocation) {
        const coordsString = `${selectedLocation.lat}, ${selectedLocation.lng}`;
        document.getElementById('prop-coords').value = coordsString;
        document.getElementById('map-picker-display').innerHTML = `<span style="color: #10b981;">‚úì Location selected: ${coordsString}</span>`;
        closeMapPicker();
      }
    }

    // Initialize property map in modal
    function initPropertyMap(coordinates) {
      // Wait for modal to be fully rendered
      setTimeout(() => {
        const mapContainer = document.getElementById('property-map');
        
        if (!mapContainer) {
          console.error('Map container not found');
          return;
        }
        
        // Parse coordinates
        const coords = coordinates.split(',').map(c => parseFloat(c.trim()));
        const lat = coords[0];
        const lng = coords[1];
        
        // Validate coordinates
        if (isNaN(lat) || isNaN(lng)) {
          console.error('Invalid coordinates:', coordinates);
          return;
        }
        
        // Remove existing map
        if (propertyMap) {
          try {
            propertyMap.remove();
          } catch (e) {
            console.error('Error removing old map:', e);
          }
          propertyMap = null;
          propertyMarker = null;
        }
        
        // Create new map
        try {
          propertyMap = L.map('property-map').setView([lat, lng], 15);
          
          // Add tile layer
          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors',
            maxZoom: 19
          }).addTo(propertyMap);
          
          // Add marker
          propertyMarker = L.marker([lat, lng]).addTo(propertyMap);
          propertyMarker.bindPopup('<b>Property Location</b>').openPopup();
          
          // Add circle
          L.circle([lat, lng], {
            color: '#2563eb',
            fillColor: '#2563eb',
            fillOpacity: 0.2,
            radius: 200
          }).addTo(propertyMap);
          
          // Force map to recalculate size
          setTimeout(() => {
            if (propertyMap) {
              propertyMap.invalidateSize();
            }
          }, 250);
          
        } catch (error) {
          console.error('Error initializing property map:', error);
        }
      }, 400);
    }

    // Agent system data
    let currentAgent = null;
    let agentProperties = [];
    let agentMessages = [];
    let uploadedImages = [];
    let agents = JSON.parse(localStorage.getItem('luxe_agents') || '[]');

    // Open agent portal
    function openAgentPortal() {
      const authModal = document.getElementById('auth-modal');
      authModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    // Close auth modal
    function closeAuthModal() {
      const authModal = document.getElementById('auth-modal');
      authModal.classList.remove('active');
      document.body.style.overflow = 'auto';
    }

    // Switch auth tabs
    function switchAuthTab(tab) {
      const loginForm = document.getElementById('login-form');
      const registerForm = document.getElementById('register-form');
      const tabs = document.querySelectorAll('.auth-tab');
      
      tabs.forEach(t => t.classList.remove('active'));
      
      if (tab === 'login') {
        loginForm.style.display = 'flex';
        registerForm.style.display = 'none';
        tabs[0].classList.add('active');
      } else {
        loginForm.style.display = 'none';
        registerForm.style.display = 'flex';
        tabs[1].classList.add('active');
      }
    }

    // Handle registration
    function handleRegister(event) {
      event.preventDefault();
      
      const name = document.getElementById('register-name').value;
      const email = document.getElementById('register-email').value;
      const phone = document.getElementById('register-phone').value;
      const password = document.getElementById('register-password').value;
      
      const errorDiv = document.getElementById('register-error');
      const successDiv = document.getElementById('register-success');
      
      // Check if email already exists
      if (agents.some(a => a.email === email)) {
        errorDiv.textContent = 'Email already registered. Please login instead.';
        errorDiv.style.display = 'block';
        successDiv.style.display = 'none';
        return;
      }
      
      // Create new agent
      const newAgent = {
        id: Date.now().toString(),
        name,
        email,
        phone,
        password,
        properties: [],
        messages: []
      };
      
      agents.push(newAgent);
      localStorage.setItem('luxe_agents', JSON.stringify(agents));
      
      successDiv.textContent = 'Account created successfully! You can now login.';
      successDiv.style.display = 'block';
      errorDiv.style.display = 'none';
      
      // Clear form
      event.target.reset();
      
      // Switch to login after 2 seconds
      setTimeout(() => {
        switchAuthTab('login');
        successDiv.style.display = 'none';
      }, 2000);
    }

    // Handle login
    function handleLogin(event) {
      event.preventDefault();
      
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      const errorDiv = document.getElementById('login-error');
      
      const agent = agents.find(a => a.email === email && a.password === password);
      
      if (!agent) {
        errorDiv.textContent = 'Invalid email or password.';
        errorDiv.style.display = 'block';
        return;
      }
      
      // Login successful
      currentAgent = agent;
      localStorage.setItem('luxe_current_agent', JSON.stringify(agent));
      
      closeAuthModal();
      openDashboard();
      
      event.target.reset();
      errorDiv.style.display = 'none';
    }

    // Open dashboard
    function openDashboard() {
      if (!currentAgent) return;
      
      const dashboard = document.getElementById('agent-dashboard');
      dashboard.classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Update welcome message
      document.getElementById('agent-welcome').textContent = `Welcome back, ${currentAgent.name}!`;
      
      // Load agent data
      agentProperties = currentAgent.properties || [];
      agentMessages = currentAgent.messages || [];
      
      updateDashboardStats();
      displayMyProperties();
      displayMessages();
    }

    // Handle logout
    function handleLogout() {
      currentAgent = null;
      localStorage.removeItem('luxe_current_agent');
      
      const dashboard = document.getElementById('agent-dashboard');
      dashboard.classList.remove('active');
      document.body.style.overflow = 'auto';
      
      // Clear forms
      document.getElementById('upload-form').reset();
      uploadedImages = [];
      document.getElementById('image-previews').innerHTML = '';
    }

    // Switch dashboard tabs
    function switchDashboardTab(tab) {
      const tabs = document.querySelectorAll('.dashboard-tab');
      const contents = document.querySelectorAll('.dashboard-content');
      
      tabs.forEach(t => t.classList.remove('active'));
      contents.forEach(c => c.classList.remove('active'));
      
      if (tab === 'my-properties') {
        tabs[0].classList.add('active');
        document.getElementById('tab-my-properties').classList.add('active');
      } else if (tab === 'messages') {
        tabs[1].classList.add('active');
        document.getElementById('tab-messages').classList.add('active');
      } else if (tab === 'upload') {
        tabs[2].classList.add('active');
        document.getElementById('tab-upload').classList.add('active');
      }
    }

    // Update dashboard statistics
    function updateDashboardStats() {
      const total = agentProperties.length;
      const active = agentProperties.filter(p => p.status === 'active').length;
      const pending = agentProperties.filter(p => p.status === 'pending').length;
      const views = agentProperties.reduce((sum, p) => sum + (p.views || 0), 0);
      const unread = agentMessages.filter(m => !m.read).length;
      
      document.getElementById('stat-total').textContent = total;
      document.getElementById('stat-active').textContent = active;
      document.getElementById('stat-pending').textContent = pending;
      document.getElementById('stat-views').textContent = views;
      document.getElementById('stat-messages').textContent = unread;
    }

    // Display agent's properties
    function displayMyProperties() {
      const grid = document.getElementById('my-properties-grid');
      grid.innerHTML = '';
      
      if (agentProperties.length === 0) {
        grid.innerHTML = '<p style="color: #6b7280; text-align: center; padding: 3rem;">No properties uploaded yet. Click "Upload New" to add your first property!</p>';
        return;
      }
      
      agentProperties.forEach(property => {
        const card = document.createElement('div');
        card.className = 'property-card';
        card.style.position = 'relative';
        
        const bedroomDisplay = property.bedrooms === 'self-contained' ? 'Studio' : `${property.bedrooms} Beds`;
        const priceDisplay = property.type === 'rent' 
          ? `‚Ç¶${property.price.toLocaleString()}/month`
          : `‚Ç¶${property.price.toLocaleString()}`;
        
        const statusClass = property.status === 'active' ? 'status-active' : 
                           property.status === 'pending' ? 'status-pending' : 'status-rejected';
        
        card.innerHTML = `
          <div style="position: relative;">
            <img src="${property.images[0]}" alt="${property.title}" class="property-image">
            <div class="property-badges">
              <span class="badge ${property.type === 'sale' ? 'badge-sale' : 'badge-rent'}">
                ${property.type === 'sale' ? 'For Sale' : 'For Rent'}
              </span>
              <span class="status-badge ${statusClass}">${property.status}</span>
            </div>
          </div>
          <div class="property-content">
            <h3 class="property-title">${property.title}</h3>
            <p class="property-location">üìç ${property.location}</p>
            <div class="property-specs">
              <span class="spec">üõèÔ∏è ${bedroomDisplay}</span>
              <span class="spec">üöø ${property.bathrooms} Baths</span>
              <span class="spec">üìê ${property.sqft} sqft</span>
            </div>
            <div class="property-price">${priceDisplay}</div>
            <div class="property-footer">
              <div class="property-stats">
                <span>üëÅÔ∏è ${property.views || 0}</span>
                <span>üí¨ ${property.messages || 0}</span>
              </div>
            </div>
          </div>
        `;
        
        grid.appendChild(card);
      });
    }

    // Display messages
    function displayMessages() {
      const list = document.getElementById('messages-list');
      list.innerHTML = '';
      
      if (agentMessages.length === 0) {
        list.innerHTML = '<p style="color: #6b7280; text-align: center; padding: 3rem;">No messages yet.</p>';
        return;
      }
      
      agentMessages.forEach(message => {
        const card = document.createElement('div');
        card.className = 'message-card';
        
        const date = new Date(message.date);
        const dateStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        
        card.innerHTML = `
          <div class="message-header">
            <div class="message-from">${message.name}</div>
            <div class="message-date">${dateStr}</div>
          </div>
          <div class="message-property">Re: ${message.propertyTitle}</div>
          <div class="message-text">${message.message}</div>
          <div class="message-contact">
            <span>üìß ${message.email}</span>
            ${message.phone ? `<span>üìû ${message.phone}</span>` : ''}
          </div>
        `;
        
        list.appendChild(card);
      });
    }

    // Handle image upload
    function handleImageUpload(event) {
      const files = Array.from(event.target.files);
      const errorDiv = document.getElementById('image-error');
      
      files.forEach(file => {
        if (file.type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = (e) => {
            uploadedImages.push(e.target.result);
            displayImagePreviews();
            
            if (uploadedImages.length >= 8) {
              errorDiv.style.display = 'none';
            }
          };
          reader.readAsDataURL(file);
        }
      });
    }

    // Display image previews
    function displayImagePreviews() {
      const container = document.getElementById('image-previews');
      container.innerHTML = '';
      
      uploadedImages.forEach((imgSrc, index) => {
        const preview = document.createElement('div');
        preview.className = 'image-preview';
        preview.innerHTML = `
          <img src="${imgSrc}" alt="Property image ${index + 1}">
          <button type="button" class="remove-image" onclick="removeImage(${index})">√ó</button>
        `;
        container.appendChild(preview);
      });
    }

    // Remove image
    function removeImage(index) {
      uploadedImages.splice(index, 1);
      displayImagePreviews();
    }

    // Handle property upload
    function handlePropertyUpload(event) {
      event.preventDefault();
      
      const errorDiv = document.getElementById('image-error');
      const submitBtn = document.getElementById('upload-submit-btn');
      
      // Validate minimum images
      if (uploadedImages.length < 8) {
        errorDiv.textContent = `Please upload at least 8 images. You have uploaded ${uploadedImages.length}.`;
        errorDiv.style.display = 'block';
        return;
      }
      
      errorDiv.style.display = 'none';
      submitBtn.disabled = true;
      submitBtn.textContent = 'Uploading...';
      
      // Get form data
      const bedrooms = document.getElementById('prop-bedrooms').value;
      const newProperty = {
        id: Date.now(),
        title: document.getElementById('prop-title').value,
        location: document.getElementById('prop-location').value,
        city: document.getElementById('prop-city').value,
        state: document.getElementById('prop-state').value,
        type: document.getElementById('prop-type').value,
        bedrooms: bedrooms === 'self-contained' ? 'self-contained' : parseInt(bedrooms),
        bathrooms: parseInt(document.getElementById('prop-bathrooms').value),
        sqft: parseInt(document.getElementById('prop-sqft').value),
        price: parseInt(document.getElementById('prop-price').value),
        featured: false,
        views: 0,
        saves: 0,
        messages: 0,
        status: 'pending',
        images: [...uploadedImages],
        description: document.getElementById('prop-description').value,
        coordinates: document.getElementById('prop-coords').value || null,
        agent: {
          name: currentAgent.name,
          email: currentAgent.email,
          phone: currentAgent.phone
        },
        uploadDate: Date.now()
      };
      
      // Add to agent's properties
      agentProperties.push(newProperty);
      currentAgent.properties = agentProperties;
      
      // Update agents in localStorage
      const agentIndex = agents.findIndex(a => a.id === currentAgent.id);
      if (agentIndex !== -1) {
        agents[agentIndex] = currentAgent;
        localStorage.setItem('luxe_agents', JSON.stringify(agents));
        localStorage.setItem('luxe_current_agent', JSON.stringify(currentAgent));
      }
      
      // Simulate approval process (auto-approve after 2 seconds)
      setTimeout(() => {
        newProperty.status = 'active';
        
        // Add to main properties array
        properties.push(newProperty);
        
        // Update display
        updateDashboardStats();
        displayMyProperties();
        displayProperties();
        
        // Save to agents
        const agentIndex = agents.findIndex(a => a.id === currentAgent.id);
        if (agentIndex !== -1) {
          agents[agentIndex] = currentAgent;
          localStorage.setItem('luxe_agents', JSON.stringify(agents));
        }
        
        submitBtn.disabled = false;
        submitBtn.textContent = 'Upload Property';
        
        // Show success and switch to properties tab
        switchDashboardTab('my-properties');
        
        // Reset form
        event.target.reset();
        uploadedImages = [];
        document.getElementById('image-previews').innerHTML = '';
        document.getElementById('map-picker-display').innerHTML = 'üìç Click to pick location on map';
      }, 2000);
    }

    // Submit contact form
    function submitContactForm(event, property) {
      event.preventDefault();
      
      const name = document.getElementById('contact-name').value;
      const email = document.getElementById('contact-email').value;
      const phone = document.getElementById('contact-phone').value;
      const message = document.getElementById('contact-message').value;
      const submitBtn = event.target.querySelector('.submit-btn');
      
      submitBtn.disabled = true;
      submitBtn.textContent = 'Sending...';
      
      // Create message object
      const newMessage = {
        id: Date.now().toString(),
        name,
        email,
        phone,
        message,
        propertyId: property.id,
        propertyTitle: property.title,
        date: Date.now(),
        read: false
      };
      
      // Find the agent for this property
      const propertyAgent = agents.find(a => a.email === property.agent.email);
      if (propertyAgent) {
        if (!propertyAgent.messages) {
          propertyAgent.messages = [];
        }
        propertyAgent.messages.push(newMessage);
        
        // Update localStorage
        const agentIndex = agents.findIndex(a => a.id === propertyAgent.id);
        if (agentIndex !== -1) {
          agents[agentIndex] = propertyAgent;
          localStorage.setItem('luxe_agents', JSON.stringify(agents));
        }
        
        // Update current agent if it's the same
        if (currentAgent && currentAgent.id === propertyAgent.id) {
          currentAgent = propertyAgent;
          agentMessages = currentAgent.messages || [];
          localStorage.setItem('luxe_current_agent', JSON.stringify(currentAgent));
        }
      }
      
      // Increment message count
      property.messages = (property.messages || 0) + 1;
      
      setTimeout(() => {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Send Message';
        
        // Show success message
        const successDiv = document.createElement('div');
        successDiv.className = 'success-message';
        successDiv.textContent = '‚úì Message sent successfully! The agent will contact you soon.';
        successDiv.style.display = 'block';
        successDiv.style.marginTop = '1rem';
        
        event.target.appendChild(successDiv);
        
        // Clear form
        event.target.reset();
        
        // Remove success message after 3 seconds
        setTimeout(() => {
          successDiv.remove();
        }, 3000);
      }, 1000);
    }

    // Drag and drop for image upload
    const uploadArea = document.getElementById('image-upload-area');
    if (uploadArea) {
      uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('drag-over');
      });
      
      uploadArea.addEventListener('dragleave', () => {
        uploadArea.classList.remove('drag-over');
      });
      
      uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('drag-over');
        
        const files = Array.from(e.dataTransfer.files);
        const fileInput = document.getElementById('image-input');
        
        // Create a new FileList-like object
        const dataTransfer = new DataTransfer();
        files.forEach(file => {
          if (file.type.startsWith('image/')) {
            dataTransfer.items.add(file);
          }
        });
        
        fileInput.files = dataTransfer.files;
        handleImageUpload({ target: { files: dataTransfer.files } });
      });
    }

    // Check for logged in agent on page load
    const savedAgent = localStorage.getItem('luxe_current_agent');
    if (savedAgent) {
      currentAgent = JSON.parse(savedAgent);
      // Load saved agent data from main agents array
      const fullAgent = agents.find(a => a.id === currentAgent.id);
      if (fullAgent) {
        currentAgent = fullAgent;
        localStorage.setItem('luxe_current_agent', JSON.stringify(currentAgent));
      }
    }

    // Sample property data - adding coordinates to some properties for testing
    const properties = [
      {
        id: 1,
        title: "Luxury Penthouse",
        location: "Victoria Island, Lagos",
        city: "Lagos",
        state: "Lagos",
        type: "sale",
        bedrooms: 4,
        bathrooms: 5,
        sqft: 3500,
        price: 250000000,
        featured: true,
        views: 234,
        saves: 45,
        images: ["https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800", "https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800"],
        description: "Stunning penthouse with panoramic city views, modern finishes, and premium amenities.",
        coordinates: "6.4281, 3.4219",
        agent: { name: "Michael Sterling", email: "michael@luxeestates.com", phone: "+234 801 234 5678" }
      },
      {
        id: 2,
        title: "Waterfront Villa Estate",
        location: "Ikoyi, Lagos",
        city: "Lagos",
        state: "Lagos",
        type: "sale",
        bedrooms: 6,
        bathrooms: 7,
        sqft: 5000,
        price: 450000000,
        featured: true,
        views: 567,
        saves: 89,
        images: ["https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800", "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800"],
        description: "Exclusive waterfront estate with private beach access, infinity pool, and smart home technology.",
        coordinates: "6.4541, 3.4316",
        agent: { name: "Sophia Laurent", email: "sophia@luxeestates.com", phone: "+234 802 345 6789" }
      },
      {
        id: 3,
        title: "Modern Suburban Home",
        location: "Lekki Phase 2, Lagos",
        city: "Lagos",
        state: "Lagos",
        type: "sale",
        bedrooms: 3,
        bathrooms: 3,
        sqft: 2200,
        price: 75000000,
        featured: false,
        views: 156,
        saves: 23,
        images: ["https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800", "https://images.unsplash.com/photo-1600566753086-00f18fb6b3ea?w=800"],
        description: "Beautiful family home in secure estate with excellent schools nearby.",
        coordinates: "6.4698, 3.5606",
        agent: { name: "David Chen", email: "david@luxeestates.com", phone: "+234 803 456 7890" }
      },
      {
        id: 4,
        title: "Self-Contained Studio",
        location: "Yaba, Lagos",
        city: "Lagos",
        state: "Lagos",
        type: "rent",
        bedrooms: "self-contained",
        bathrooms: 1,
        sqft: 450,
        price: 350000,
        featured: false,
        views: 89,
        saves: 12,
        images: ["https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800", "https://images.unsplash.com/photo-1502672260066-6bc2614aaaa8?w=800"],
        description: "Affordable self-contained room perfect for students and young professionals.",
        agent: { name: "Emily Rodriguez", email: "emily@luxeestates.com", phone: "+234 804 567 8901" }
      },
      {
        id: 5,
        title: "Executive 2-Bedroom",
        location: "Wuse 2, Abuja",
        city: "Abuja",
        state: "FCT",
        type: "rent",
        bedrooms: 2,
        bathrooms: 2,
        sqft: 1200,
        price: 1500000,
        featured: true,
        views: 234,
        saves: 34,
        images: ["https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800", "https://images.unsplash.com/photo-1554995207-c18c203602cb?w=800"],
        description: "Modern apartment in prime location with gym, pool, and 24/7 security.",
        coordinates: "9.0579, 7.4951",
        agent: { name: "Michael Sterling", email: "michael@luxeestates.com", phone: "+234 801 234 5678" }
      },
      {
        id: 6,
        title: "Luxury 5-Bedroom Duplex",
        location: "Maitama, Abuja",
        city: "Abuja",
        state: "FCT",
        type: "sale",
        bedrooms: 5,
        bathrooms: 6,
        sqft: 4200,
        price: 320000000,
        featured: true,
        views: 445,
        saves: 67,
        images: ["https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?w=800", "https://images.unsplash.com/photo-1600585154526-990dced4db0d?w=800"],
        description: "Magnificent duplex in exclusive neighborhood with state-of-the-art amenities.",
        coordinates: "9.0820, 7.4896",
        agent: { name: "Sophia Laurent", email: "sophia@luxeestates.com", phone: "+234 802 345 6789" }
      },
      {
        id: 7,
        title: "Student-Friendly Room",
        location: "Bodija, Ibadan",
        city: "Ibadan",
        state: "Oyo",
        type: "rent",
        bedrooms: "self-contained",
        bathrooms: 1,
        sqft: 400,
        price: 250000,
        featured: false,
        views: 123,
        saves: 18,
        images: ["https://images.unsplash.com/photo-1595526114035-0d45ed16cfbf?w=800", "https://images.unsplash.com/photo-1513694203232-719a280e022f?w=800"],
        description: "Affordable self-contained room near UI campus with all utilities included.",
        agent: { name: "Emily Rodriguez", email: "emily@luxeestates.com", phone: "+234 804 567 8901" }
      },
      {
        id: 8,
        title: "Garden City Mansion",
        location: "Old GRA, Port Harcourt",
        city: "Port Harcourt",
        state: "Rivers",
        type: "sale",
        bedrooms: 7,
        bathrooms: 8,
        sqft: 6000,
        price: 550000000,
        featured: true,
        views: 678,
        saves: 95,
        images: ["https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800", "https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=800"],
        description: "Palatial mansion with extensive gardens, pool house, and entertainment wing.",
        coordinates: "4.8156, 7.0498",
        agent: { name: "David Chen", email: "david@luxeestates.com", phone: "+234 803 456 7890" }
      }
    ];

    let filteredProperties = [...properties];
    let currentCarouselIndex = 0;
    let currentProperty = null;

    // Default config
    const defaultConfig = {
      company_name: "LUXE ESTATES",
      hero_title: "Find Your Dream Property",
      hero_subtitle: "Discover luxury homes across Nigeria with AI-powered search",
      about_title: "About LUXE ESTATES",
      contact_email: "info@luxeestates.com",
      contact_phone: "+234 800 123 4567",
      background_color: "#ffffff",
      surface_color: "#f9fafb",
      text_color: "#111827",
      primary_action_color: "#2563eb",
      secondary_action_color: "#6b7280",
      font_family: "Inter",
      font_size: 16
    };

    // Initialize properties display
    function displayProperties(propertiesToShow = properties) {
      const grid = document.getElementById('properties-grid');
      grid.innerHTML = '';

      propertiesToShow.forEach(property => {
        const card = document.createElement('div');
        card.className = 'property-card';
        card.style.position = 'relative';
        card.onclick = () => openPropertyModal(property);

        const bedroomDisplay = property.bedrooms === 'self-contained' ? 'Studio' : `${property.bedrooms} Beds`;
        const priceDisplay = property.type === 'rent' 
          ? `‚Ç¶${property.price.toLocaleString()}/month`
          : `‚Ç¶${property.price.toLocaleString()}`;

        card.innerHTML = `
          <div style="position: relative;">
            <img src="${property.images[0]}" alt="${property.title}" class="property-image">
            <div class="property-badges">
              <span class="badge ${property.type === 'sale' ? 'badge-sale' : 'badge-rent'}">
                ${property.type === 'sale' ? 'For Sale' : 'For Rent'}
              </span>
              ${property.featured ? '<span class="badge badge-featured">Featured</span>' : ''}
            </div>
          </div>
          <div class="property-content">
            <h3 class="property-title">${property.title}</h3>
            <p class="property-location">üìç ${property.location}</p>
            <div class="property-specs">
              <span class="spec">üõèÔ∏è ${bedroomDisplay}</span>
              <span class="spec">üöø ${property.bathrooms} Baths</span>
              <span class="spec">üìê ${property.sqft} sqft</span>
            </div>
            <div class="property-price">${priceDisplay}</div>
            <div class="property-footer">
              <div class="property-stats">
                <span>üëÅÔ∏è ${property.views}</span>
                <span>‚ù§Ô∏è ${property.saves}</span>
              </div>
              <button class="view-details-btn">View Details</button>
            </div>
          </div>
        `;

        grid.appendChild(card);
      });
    }

    // AI-powered search
    function performAISearch() {
      const searchInput = document.getElementById('ai-search').value.toLowerCase();
      
      if (!searchInput.trim()) {
        filteredProperties = [...properties];
        displayProperties(filteredProperties);
        return;
      }

      // AI-like natural language processing
      filteredProperties = properties.filter(property => {
        const searchTerms = searchInput.split(' ');
        const propertyText = `${property.title} ${property.location} ${property.description} ${property.bedrooms} ${property.type}`.toLowerCase();
        
        // Check for bedroom-specific searches
        if (searchInput.includes('self-contained') || searchInput.includes('self contained') || searchInput.includes('studio')) {
          if (property.bedrooms !== 'self-contained') return false;
        }
        
        // Check for location searches
        if (searchInput.includes('downtown') || searchInput.includes('city center')) {
          if (!property.location.toLowerCase().includes('victoria') && 
              !property.location.toLowerCase().includes('wuse') && 
              !property.location.toLowerCase().includes('yaba')) return false;
        }

        // Check for pool
        if (searchInput.includes('pool')) {
          if (!property.description.toLowerCase().includes('pool')) return false;
        }

        // Check for bedroom count
        const bedroomMatch = searchInput.match(/(\d+)[\s-]*(bed|bedroom)/);
        if (bedroomMatch) {
          const bedCount = parseInt(bedroomMatch[1]);
          if (property.bedrooms !== 'self-contained' && property.bedrooms !== bedCount) return false;
        }

        // General term matching
        return searchTerms.some(term => propertyText.includes(term));
      });

      displayProperties(filteredProperties);
      scrollToSection('properties');
    }

    // Apply filters
    function applyFilters() {
      const type = document.getElementById('filter-type').value;
      const bedrooms = document.getElementById('filter-bedrooms').value;
      const location = document.getElementById('filter-location').value;
      const sort = document.getElementById('filter-sort').value;

      filteredProperties = properties.filter(property => {
        if (type !== 'all' && property.type !== type) return false;
        if (bedrooms !== 'all') {
          if (bedrooms === 'self-contained' && property.bedrooms !== 'self-contained') return false;
          if (bedrooms === '4+' && property.bedrooms !== 'self-contained' && property.bedrooms < 4) return false;
          if (bedrooms !== 'self-contained' && bedrooms !== '4+' && property.bedrooms !== parseInt(bedrooms)) return false;
        }
        if (location !== 'all' && property.city !== location) return false;
        return true;
      });

      // Sort
      if (sort === 'price-low') {
        filteredProperties.sort((a, b) => a.price - b.price);
      } else if (sort === 'price-high') {
        filteredProperties.sort((a, b) => b.price - a.price);
      } else if (sort === 'featured') {
        filteredProperties.sort((a, b) => (b.featured ? 1 : 0) - (a.featured ? 1 : 0));
      }

      displayProperties(filteredProperties);
    }

    // Property modal
    function openPropertyModal(property) {
      currentProperty = property;
      currentCarouselIndex = 0;
      const modal = document.getElementById('property-modal');
      const modalBody = document.getElementById('modal-body');

      const bedroomDisplay = property.bedrooms === 'self-contained' ? 'Studio (Self-Contained)' : `${property.bedrooms} Bedrooms`;
      const priceDisplay = property.type === 'rent' 
        ? `‚Ç¶${property.price.toLocaleString()}/month`
        : `‚Ç¶${property.price.toLocaleString()}`;

      modalBody.innerHTML = `
        <div class="image-carousel">
          ${property.images.map((img, index) => `
            <img src="${img}" alt="${property.title}" class="carousel-image ${index === 0 ? 'active' : ''}">
          `).join('')}
          ${property.images.length > 1 ? `
            <button class="carousel-nav carousel-prev" onclick="changeCarouselImage(-1); stopAutoSwipe();">‚Äπ</button>
            <button class="carousel-nav carousel-next" onclick="changeCarouselImage(1); stopAutoSwipe();">‚Ä∫</button>
            <div class="carousel-dots">
              ${property.images.map((_, index) => `
                <button class="carousel-dot ${index === 0 ? 'active' : ''}" onclick="goToCarouselImage(${index}); stopAutoSwipe();"></button>
              `).join('')}
            </div>
          ` : ''}
        </div>

        <div class="property-details">
          <div class="detail-section">
            <h3>Property Information</h3>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">Price</span>
                <span class="detail-value">${priceDisplay}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Type</span>
                <span class="detail-value">${property.type === 'sale' ? 'For Sale' : 'For Rent'}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Bedrooms</span>
                <span class="detail-value">${bedroomDisplay}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Bathrooms</span>
                <span class="detail-value">${property.bathrooms}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Size</span>
                <span class="detail-value">${property.sqft} sqft</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Location</span>
                <span class="detail-value">${property.location}</span>
              </div>
            </div>
          </div>

          <div class="detail-section">
            <h3>Description</h3>
            <p style="color: #4b5563; line-height: 1.8;">${property.description}</p>
          </div>

          <div class="detail-section">
            <h3>Contact Agent</h3>
            <div class="agent-card">
              <div class="agent-avatar">${property.agent.name.charAt(0)}</div>
              <div class="agent-info">
                <h4>${property.agent.name}</h4>
                <div class="agent-contact">
                  <span>üìß ${property.agent.email}</span>
                  <span>üìû ${property.agent.phone}</span>
                </div>
              </div>
            </div>
          </div>

          ${property.coordinates ? `
            <div class="detail-section">
              <h3>üìç Property Location</h3>
              <div id="property-map" style="width: 100%; height: 400px; border-radius: 12px; overflow: hidden; margin-top: 1rem; background: #f3f4f6;"></div>
              <p style="color: #6b7280; font-size: 0.85rem; margin-top: 0.5rem;">üìç Coordinates: ${property.coordinates}</p>
            </div>
          ` : ''}

          <div class="contact-agent-form">
            <h3>üì© Contact Agent</h3>
            <form class="auth-form" onsubmit="submitContactForm(event, ${JSON.stringify(property).replace(/"/g, '&quot;')})">
              <div class="form-group">
                <label class="form-label" for="contact-name">Your Name *</label>
                <input type="text" id="contact-name" class="form-input" required>
              </div>
              <div class="form-group">
                <label class="form-label" for="contact-email">Your Email *</label>
                <input type="email" id="contact-email" class="form-input" required>
              </div>
              <div class="form-group">
                <label class="form-label" for="contact-phone">Your Phone (optional)</label>
                <input type="tel" id="contact-phone" class="form-input">
              </div>
              <div class="form-group">
                <label class="form-label" for="contact-message">Message *</label>
                <textarea id="contact-message" class="form-input form-textarea" placeholder="I'm interested in this property..." required></textarea>
              </div>
              <button type="submit" class="submit-btn">Send Message</button>
            </form>
          </div>
        </div>
      `;

      modal.classList.add('active');
      document.body.style.overflow = 'hidden';

      // Start auto-swipe for images
      if (property.images.length > 1) {
        startAutoSwipe();
      }

      // Initialize map if coordinates exist
      if (property.coordinates) {
        initPropertyMap(property.coordinates);
      }
    }

    let autoSwipeInterval = null;

    function startAutoSwipe() {
      stopAutoSwipe(); // Clear any existing interval
      autoSwipeInterval = setInterval(() => {
        changeCarouselImage(1);
      }, 2000); // Auto-swipe every 2 seconds
    }

    function stopAutoSwipe() {
      if (autoSwipeInterval) {
        clearInterval(autoSwipeInterval);
        autoSwipeInterval = null;
      }
    }

    function closeModal() {
      const modal = document.getElementById('property-modal');
      modal.classList.remove('active');
      document.body.style.overflow = 'auto';
      stopAutoSwipe();
      
      // Clean up property map
      if (propertyMap) {
        try {
          propertyMap.remove();
        } catch (e) {
          console.error('Error removing map:', e);
        }
        propertyMap = null;
        propertyMarker = null;
      }
    }

    function changeCarouselImage(direction) {
      const images = document.querySelectorAll('.carousel-image');
      const dots = document.querySelectorAll('.carousel-dot');
      
      images[currentCarouselIndex].classList.remove('active');
      dots[currentCarouselIndex].classList.remove('active');
      
      currentCarouselIndex = (currentCarouselIndex + direction + images.length) % images.length;
      
      images[currentCarouselIndex].classList.add('active');
      dots[currentCarouselIndex].classList.add('active');
    }

    function goToCarouselImage(index) {
      const images = document.querySelectorAll('.carousel-image');
      const dots = document.querySelectorAll('.carousel-dot');
      
      images[currentCarouselIndex].classList.remove('active');
      dots[currentCarouselIndex].classList.remove('active');
      
      currentCarouselIndex = index;
      
      images[currentCarouselIndex].classList.add('active');
      dots[currentCarouselIndex].classList.add('active');
    }

    // Chat functionality
    function toggleChat() {
      const chatWindow = document.getElementById('chat-window');
      const unreadBadge = document.getElementById('unread-badge');
      chatWindow.classList.toggle('active');
      if (chatWindow.classList.contains('active')) {
        unreadBadge.classList.remove('show');
      }
    }

    function openChat() {
      const chatWindow = document.getElementById('chat-window');
      const unreadBadge = document.getElementById('unread-badge');
      chatWindow.classList.add('active');
      unreadBadge.classList.remove('show');
    }

    function sendChatMessage() {
      const input = document.getElementById('chat-input');
      const message = input.value.trim();
      if (!message) return;

      addChatMessage(message, 'user');
      input.value = '';

      // Show typing indicator
      const typingIndicator = document.getElementById('typing-indicator');
      typingIndicator.classList.add('show');

      setTimeout(() => {
        typingIndicator.classList.remove('show');
        const responses = [
          "Thank you for your interest! I'll connect you with one of our agents right away.",
          "Great! Let me help you find the perfect property. What's your budget range?",
          "I can definitely help with that! Would you like to schedule a viewing?"
        ];
        const response = responses[Math.floor(Math.random() * responses.length)];
        addChatMessage(response, 'agent');
      }, 1500);
    }

    function sendQuickReply(message) {
      addChatMessage(message, 'user');

      const typingIndicator = document.getElementById('typing-indicator');
      typingIndicator.classList.add('show');

      setTimeout(() => {
        typingIndicator.classList.remove('show');
        let response = '';
        if (message === 'Find Property') {
          response = "I'd be happy to help you find a property! What type of property are you looking for? (House, apartment, self-contained room, etc.)";
        } else if (message === 'Schedule Tour') {
          response = "Great! I can schedule a property tour for you. Which property caught your eye? Please share the property name or location.";
        } else if (message === 'Pricing Info') {
          response = "Our commission is 5% for sales and 10% of annual rent for rentals. Property listings are FREE for individual owners. No hidden charges!";
        }
        addChatMessage(response, 'agent');
      }, 1500);
    }

    function addChatMessage(message, sender) {
      const messagesContainer = document.getElementById('chat-messages');
      const messageDiv = document.createElement('div');
      messageDiv.className = `message message-${sender}`;
      
      const now = new Date();
      const timeString = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
      
      messageDiv.innerHTML = `
        <div>${message}</div>
        <div class="message-time">${timeString}</div>
      `;
      
      messagesContainer.appendChild(messageDiv);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function handleChatKeypress(event) {
      if (event.key === 'Enter') {
        sendChatMessage();
      }
    }

    // Scroll to section
    function scrollToSection(sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    // Element SDK implementation
    async function onConfigChange(config) {
      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'system-ui, -apple-system, sans-serif';
      const baseSize = config.font_size || defaultConfig.font_size;

      // Update fonts
      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
      
      // Update font sizes
      const heroTitle = document.querySelector('.hero h1');
      const heroSubtitle = document.querySelector('.hero p');
      const sectionTitles = document.querySelectorAll('.section-title');
      const propertyTitles = document.querySelectorAll('.property-title');
      const navLinks = document.querySelectorAll('.nav-link');
      
      if (heroTitle) heroTitle.style.fontSize = `${baseSize * 3}px`;
      if (heroSubtitle) heroSubtitle.style.fontSize = `${baseSize * 1.3}px`;
      sectionTitles.forEach(el => el.style.fontSize = `${baseSize * 2}px`);
      propertyTitles.forEach(el => el.style.fontSize = `${baseSize * 1.3}px`);
      navLinks.forEach(el => el.style.fontSize = `${baseSize}px`);

      // Update colors
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;

      document.body.style.background = bgColor;
      document.body.style.color = textColor;

      // Update surface colors
      const surfaces = document.querySelectorAll('.search-section, .property-card, .info-section');
      surfaces.forEach(el => el.style.background = surfaceColor);

      // Update text colors
      const texts = document.querySelectorAll('.property-title, .detail-value, .agent-info h4');
      texts.forEach(el => el.style.color = textColor);

      // Update secondary text
      const secondaryTexts = document.querySelectorAll('.property-location, .property-stats, .spec, .detail-label');
      secondaryTexts.forEach(el => el.style.color = secondaryColor);

      // Update text content
      document.getElementById('company-name').textContent = config.company_name || defaultConfig.company_name;
      document.getElementById('hero-title').textContent = config.hero_title || defaultConfig.hero_title;
      document.getElementById('hero-subtitle').textContent = config.hero_subtitle || defaultConfig.hero_subtitle;
      document.getElementById('about-title').textContent = config.about_title || defaultConfig.about_title;
      document.getElementById('contact-email').textContent = config.contact_email || defaultConfig.contact_email;
      document.getElementById('contact-phone').textContent = config.contact_phone || defaultConfig.contact_phone;

      // Update button and action colors
      const buttons = document.querySelectorAll('.search-btn, .view-details-btn, .chat-button, .chat-send, .chat-header');
      buttons.forEach(btn => {
        btn.style.background = `linear-gradient(135deg, ${primaryColor}, ${primaryColor}dd)`;
      });

      // Update accent colors
      const accentElements = document.querySelectorAll('.logo, .section-title, .property-price, .modal-title, .detail-section h3, .info-section h2, .footer-section h3');
      accentElements.forEach(el => {
        if (el.classList.contains('logo')) {
          el.style.background = `linear-gradient(135deg, ${primaryColor}, ${primaryColor}dd)`;
          el.style.webkitBackgroundClip = 'text';
          el.style.webkitTextFillColor = 'transparent';
          el.style.backgroundClip = 'text';
        } else {
          el.style.color = primaryColor;
        }
      });

      // Update nav links
      document.querySelectorAll('.nav-link').forEach(link => {
        link.style.color = textColor === '#ffffff' ? '#e5e7eb' : '#374151';
      });
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (value) => {
                config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            },
            {
              get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
              set: (value) => {
                config.secondary_action_color = value;
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["company_name", config.company_name || defaultConfig.company_name],
          ["hero_title", config.hero_title || defaultConfig.hero_title],
          ["hero_subtitle", config.hero_subtitle || defaultConfig.hero_subtitle],
          ["about_title", config.about_title || defaultConfig.about_title],
          ["contact_email", config.contact_email || defaultConfig.contact_email],
          ["contact_phone", config.contact_phone || defaultConfig.contact_phone]
        ])
      });
    }

    // Initialize
    displayProperties();

    // Show unread badge after 3 seconds
    setTimeout(() => {
      document.getElementById('unread-badge').classList.add('show');
    }, 3000);

    // Close modal when clicking outside
    document.getElementById('property-modal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeModal();
      }
    });

    // Handle search on Enter key
    document.getElementById('ai-search').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        performAISearch();
      }
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ba4aa520712cd25',t:'MTc2NzgwMTU5Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>